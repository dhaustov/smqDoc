<?php
require_once 'Init.php';
/*
 * Test file for P. Serdukov
 * 
 */
//echo "Create Rep <br>";
///* @var $dtpRep DocTemplateRepository */
//$dtpRep = new DocTemplateRepository;
//echo 'Create 1 DT<br>';
///* @var $docTpl1 DocTemplate */
//$docTpl1 = new DocTemplate;
//$docTpl1->Name = "First doc tpl";
//$docTpl1->fieldsList = array();
//echo 'Create  DT f1<br>';
///*@var $docTpl1F1 DocTemplateField*/
//$docTpl1F1 = new DocTemplateField;
//$docTpl1F1->Id  = -3;
//$docTpl1F1->Name = "dt1f1";
//$docTpl1F1->IsCalculated = false;
//$docTpl1F1->FieldType = $dtpRep->docTemplateFieldTypesArr[1];
//$docTpl1F1->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl1F1->IsRestricted = false;
//$docTpl1F1->MinVal  = 10;
//$docTpl1F1->MaxVal = 20;
//$docTpl1->fieldsList[$docTpl1F1->Id] = $docTpl1F1;
//echo 'Create  DT f2<br>';
///*@var $docTpl1F2 DocTemplateField*/
//$docTpl1F2 = new DocTemplateField;
//$docTpl1F2->Id  = -2;
//$docTpl1F2->Name = "dt1f2";
//$docTpl1F2->IsCalculated = true;
//$docTpl1F2->FieldType = $dtpRep->docTemplateFieldTypesArr[2];
//$docTpl1F2->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl1F2->IsRestricted = true;
//$docTpl1F2->MinVal  = 15;
//$docTpl1F2->MaxVal = 70;
//$docTpl1->fieldsList[$docTpl1F2->Id] = $docTpl1F2;
//echo 'Create  DT f3<br>';
///*@var $docTpl1F3 DocTemplateField*/
//$docTpl1F3 = new DocTemplateField;
//$docTpl1F3->Id  = -1;
//$docTpl1F3->Name = "dt1f3";
//$docTpl1F3->IsCalculated = false;
//$docTpl1F3->FieldType = $dtpRep->docTemplateFieldTypesArr[1];
//$docTpl1F3->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl1F3->IsRestricted = true;
//$docTpl1F3->MinVal  = 10;
//$docTpl1F3->MaxVal = 200;
//$docTpl1->fieldsList[$docTpl1F3->Id] = $docTpl1F3;
//
//$dtpRep->Save($docTpl1);
//echo 'Create 2 DT<br>';
///* @var $docTpl2 DocTemplate */
//$docTpl2 = new DocTemplate;
//$docTpl2->Name = "First doc tpl";
//$docTpl2->fieldsList = array();
//echo 'Create  DT f1<br>';
///*@var $docTpl2F1 DocTemplateField*/
//$docTpl2F1 = new DocTemplateField;
//$docTpl2F1->Id  = -3;
//$docTpl2F1->Name = "dt2f1";
//$docTpl2F1->IsCalculated = false;
//$docTpl2F1->FieldType = $dtpRep->docTemplateFieldTypesArr[1];
//$docTpl2F1->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl2F1->IsRestricted = false;
//$docTpl2F1->MinVal  = 10;
//$docTpl2F1->MaxVal = 20;
//$docTpl2->fieldsList[$docTpl2F1->Id] = $docTpl2F1;
//echo 'Create  DT f2<br>';
///*@var $docTpl2F2 DocTemplateField*/
//$docTpl2F2 = new DocTemplateField;
//$docTpl2F2->Id  = -2;
//$docTpl2F2->Name = "dt2f2";
//$docTpl2F2->IsCalculated = true;
//$docTpl2F2->FieldType = $dtpRep->docTemplateFieldTypesArr[2];
//$docTpl2F2->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl2F2->IsRestricted = true;
//$docTpl2F2->MinVal  = 15;
//$docTpl2F2->MaxVal = 70;
//$docTpl2->fieldsList[$docTpl2F2->Id] = $docTpl2F2;
//echo 'Create  DT f3<br>';
///*@var $docTpl2F3 DocTemplateField*/
//$docTpl2F3 = new DocTemplateField;
//$docTpl2F3->Id  = -1;
//$docTpl2F3->Name = "dt2f3";
//$docTpl2F3->IsCalculated = true;
//$docTpl2F3->FieldType = $dtpRep->docTemplateFieldTypesArr[2];
//$docTpl2F3->Operation = $dtpRep->docTemplateOperationsArr[1];
//$docTpl2F3->IsRestricted = true;
//$docTpl2F3->MinVal  = 10;
//$docTpl2F3->MaxVal = 200;
//$docTpl2->fieldsList[$docTpl2F3->Id] = $docTpl2F3;
//
//if(!$dtpRep->Save($docTpl2))
//
//echo "Get 1 DT from DB<br>";
///* @var $docTpl1N DocTemplate */
//$docTpl1N = $dtpRep->GetByID($docTpl1->Id);
//echo "Get 2 DT from DB<br>";
///* @var $docTpl2N DocTemplate */
//$docTpl2N = $dtpRep->GetByID($docTpl2->Id);
//
//if($docTpl1 == $docTpl1N)
//{
//    echo "docTp1 CURRECT <br>";
//}
//else
//{
//    echo "docTp1 WRONG <br>";
//    print_r($docTpl1);
//    echo "<br>";
//    print_r($docTpl1N);
//}
//if($docTpl2 == $docTpl2N )
//{
//    echo "docTp2 CURRECT<br>";
//}
//else
//{
//    echo "docTp2 WRONG <br>";
//    print_r($docTpl2);
//    echo "<br>";
//    print_r($docTpl2N);
//}
//if($docTpl1 == $docTpl2 )
//{
//    echo "TEST FALSE <br>";
//}
//else
//{
//    echo "TEST TRUE <br>";
//}

?>
